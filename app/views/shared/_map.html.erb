<div id='section'>

  <div id='map'></div>

  <script type="text/javascript" charset="utf-8">
      var geojsonVulcanoes= <%= raw @geojson_vulcanoes.to_s.gsub('=>',':')%>;
      var geojsonAirports= <%= raw @geojson_airports.to_s.gsub('=>',':')%>;

          console.log(geojsonVulcanoes);
          console.log(geojsonAirports);

      mapboxgl.accessToken = 'pk.eyJ1IjoiZG9kYWsyNTgiLCJhIjoiY2pwMGRxendzMzNqaTNxbmhuOXNkbHNscSJ9.XKSuCTZkL0mBIK3uB_rUyQ';

      var map = new mapboxgl.Map({
          container: 'map', // container id
          style: 'mapbox://styles/mapbox/outdoors-v9', //stylesheet location
          center: [6.852063075609196, 50.16904742413753], // starting position
          zoom: 3 // starting zoom
      });

      map.addControl(new mapboxgl.FullscreenControl());

      geojsonVulcanoes.forEach(function(marker) {
          if (marker === "[" || marker === "]" || marker === ",")
              return;
          // create a HTML element for each feature
          var el = document.createElement('div');
          el.className = 'marker';
          el.style.backgroundColor = marker.properties.color;
          el.style.height = marker.properties.size + 'px';
          el.style.width = marker.properties.size + 'px';

          // make a marker for each feature and add to the map
          new mapboxgl.Marker(el)
              .setLngLat(marker.geometry.coordinates)
              .addTo(map);
      });

      geojsonAirports.forEach(function(marker) {
          if (marker === "[" || marker === "]" || marker === ",")
              return;
          // create a HTML element for each feature
          var el = document.createElement('div');
          el.className = 'marker';
          el.style.backgroundColor = marker.properties.color;
          el.style.height =  10 + 'px';
          el.style.width = 10 + 'px';

          // make a marker for each feature and add to the map
          new mapboxgl.Marker(el)
              .setLngLat(marker.geometry.coordinates)
              .addTo(map);
      });


  </script>
</div>